<?xml version="1.0" encoding="UTF-8"?>
<lccdd xmlns:compact="http://www.lcsim.org/schemas/compact/1.0"
       xmlns:xs="http://www.w3.org/2001/XMLSchema"
       xs:noNamespaceSchemaLocation="http://www.lcsim.org/schemas/compact/1.0/compact.xsd">

  <info name="FCChh_ECalBarrel_Common"
        title="Common settings for Inclined ECal Barrel Calorimeter"
        author="A.Zaborowska"
        url="no"
        status="development"
        version="1.0">
    <comment>
      Common settings for the inclined EMcal.
      The barrel is filled with liquid argon. Lead strips are inclined by a certain angle from the radial direction.
      Definition of sizes, visualization settings and readout are specified.
    </comment>
  </info>

  <define>
    <constant name="LArBathThickness" value="100*mm"/>
    <!-- overall calorimeter volume (cryostat) -->
    <constant name="BarCryoECal_rmin" value="BarECal_rmin"/>
    <constant name="BarCryoECal_rmax" value="BarECal_rmax"/>
    <constant name="BarCryoECal_dz" value="BarECal_dz"/>
    <!-- calorimeter active volume -->
    <constant name="EMBarrel_rmin" value="BarCryoECal_rmin+CommonCryoThickness+LArBathThickness"/>
    <constant name="EMBarrel_rmax" value="BarCryoECal_rmax-CommonCryoThickness-LArBathThickness"/>
    <constant name="EMBarrel_dz" value="BarECal_dz-CommonCryoThickness"/>
    <constant name="LAr_thickness" value="6*mm"/>
    <constant name="Pb_thickness" value="2*mm"/>
  </define>

  <display>
    <vis name="ecal_envelope" r="0.1" g="0.2" b="0.6" alpha="1" showDaughers="false" visible="true" />
  </display>

  <readouts>
    <readout name="ECalHitsRPhiEta">
      <segmentation type="GridRPhiEta" grid_size_eta="0.01" phi_bins="629" grid_size_r="100*mm" offset_r="EMBarrel_rmin+0.5*LAr_thickness+0.5*Pb_thickness+0.0001*mm"/>
      <id>system:4,r:9,eta:-9,phi:-10</id>
    </readout>
  </readouts>

  <detectors>
    <detector id="BarECal_id" name="ECalBarrel" type="EmCaloBarrelInclined" readout="ECalHitsRPhiEta">
      <sensitive type="SimpleCalorimeterSD"/>
      <dimensions rmin="BarCryoECal_rmin" rmax="BarCryoECal_rmax" dz="BarCryoECal_dz" vis="ecal_envelope"/>
      <cryostat name="ECAL_Cryo">
        <material name="Aluminum"/>
	     <dimensions rmin="BarCryoECal_rmin" rmax="BarCryoECal_rmax" dz="BarCryoECal_dz" thickness="CryoThickness" />
      </cryostat>
      <calorimeter name="EM_barrel" >
	     <dimensions rmin="EMBarrel_rmin" rmax="EMBarrel_rmax" dz="EMBarrel_dz" />
	     <active thickness="LAr_thickness">
          <material name="LAr" />
        </active>
	     <passive thickness="Pb_thickness">
          <material name="Lead"/>
          <rotation angle="5*degree"/>
        </passive>
      </calorimeter>
    </detector>
  </detectors>

</lccdd>
